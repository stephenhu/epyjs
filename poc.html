<!DOCTYPE html>
<html lang="en">
  <head>
    <title>poc</title>
    <script src="./dist/bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </head>
  <body>
    <div id="main">
    </div>
    <script>

      const Github = window.default;
      const gh = new Github(
        "https://stephenhu.github.io/blog-www", "meta.json");

      function updateArticle(k) {

        var id = document.getElementById(k);

        var div = document.createElement("div");

        let d = gh.articles.get(k);

        div.innerHTML = marked.parse(d.content);

        id.appendChild(div);

      } // updateArticle


      function addArticles() {

        let meta = gh.meta;

        const main = document.getElementById("main");

        for(a of meta.content) {

          const div = document.createElement("div");

          console.log(a.id);

          div.setAttribute("id", a.id);

          main.appendChild(div);

          gh.getContent(a.id, updateArticle);

        }

      } // addArticles


      //gh.getArticles(f);

      gh.getIndex(addArticles);

      
      /*
      setTimeout(function() {
        console.log(gh.articles);
      }, 3000);
      */

    </script>
  </body>
</html>